"use strict";var createElement=function(b,c,d){var f=document.createElement(b);return f.className=c,d&&(f.id=d),f},mainChatElement=document.getElementById("cognigy"),outerContainer=createElement("div","cognigy-outer-container__closed","cognigy-outer-container"),toggleChatState=createElement("div","cognigy-chat-state-closed","cognigy-toggle-state");toggleChatState.onclick=handleChatOpen,mainChatElement.appendChild(outerContainer),mainChatElement.appendChild(toggleChatState);var headerContainer=createElement("div","cognigy-chat-header-container__open","cognigy-header"),header=createElement("div","cognigy-chat-header"),headerText=createElement("div","cognigy-header-text"),headerTitle=createElement("span","cognigy-header-title"),headerSubtitle=createElement("span","cognigy-header-subtitle");headerTitle.appendChild(document.createTextNode("Chat")),headerSubtitle.appendChild(document.createTextNode("Online")),headerText.appendChild(headerTitle),headerText.appendChild(headerSubtitle);var avatar=createElement("img","cognigy-header-avatar");avatar.src="./images/cognigy_avatar.svg",avatar.id="cognigyHeaderLogo",header.append(avatar);var headerMobileClose=createElement("div","displayNone","cognigy-toggle-state-mobile");headerMobileClose.onclick=handleChatOpen,header.appendChild(headerText),header.appendChild(headerMobileClose),headerContainer.appendChild(header),outerContainer.appendChild(headerContainer);var chatContainer=createElement("div","cognigy-chat-container","cognigy-container");outerContainer.appendChild(chatContainer);var chatForm=createElement("form","cognigy-chat-form","cognigy-form");outerContainer.appendChild(chatForm);var chatInput=createElement("textarea","cognigy-chat-input","cognigy-input");chatInput.placeholder="Write a reply",function(){function a(b,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var d=document.createEvent("CustomEvent");return d.initCustomEvent(b,c.bubbles,c.cancelable,c.detail),d}return"function"!=typeof window.CustomEvent&&void(a.prototype=window.Event.prototype,window.CustomEvent=a)}();var messageEvent=new CustomEvent("submit",{cancelable:!0});chatInput.onkeydown=function(a){13!==a.keyCode||a.shiftKey?null:function(){a.preventDefault(),document.getElementById("cognigy-form").dispatchEvent(messageEvent)}()},chatForm.appendChild(chatInput);var chatButton=createElement("button","cognigy-chat-button","cognigy-button"),sendAvatar=createElement("img","cognigy-send-icon");sendAvatar.src="./images/send.svg",chatButton.appendChild(sendAvatar),chatForm.appendChild(chatButton);var recordToggleButton=createElement("button","cognigy-record-toggle-button","cognigy-record-toggle");recordToggleButton.onclick=function(){handleRecordToggle()},recordToggleButton.type="button";var recordToggleAvatar=createElement("img","cognigy-record-toggle-icon");recordToggleAvatar.src="./images/mic_off.svg",recordToggleButton.appendChild(recordToggleAvatar),chatForm.appendChild(recordToggleButton);var recordButton=createElement("button","displayNone","cognigy-record");recordButton.type="button",chatForm.insertBefore(recordButton,recordToggleButton);var recordToggled=!1;function handleRecordToggle(){recordToggled=!recordToggled,recordToggled?(recordToggleAvatar.src="./images/mic_on.svg",chatInput.className="displayNone",chatForm.style.justifyContent="center",recordButton.className="cognigy-record-button"):(recordToggleAvatar.src="./images/mic_off.svg",recordButton.className="displayNone",chatInput.className="cognigy-chat-input")}function handleChatOpen(){var a=document.getElementById("cognigy-toggle-state"),b=document.getElementById("cognigy-toggle-state-mobile"),c=document.getElementById("cognigy-outer-container"),d=document.getElementById("cognigy-header");"cognigy-chat-state-closed"===a.className?(c.className="cognigy-outer-container__open",a.className="cognigy-chat-state-open",b.className="cognigy-mobile-close"):(c.className="cognigy-outer-container__closed",a.className="cognigy-chat-state-closed",b.className="displayNone")}function handleSendMessage(a){a.preventDefault();var b=document.getElementById("cognigy-input").value,c=document.getElementById("cognigy-container"),d=document.createElement("div"),f=document.createElement("div"),g=document.createTextNode(b);console.log(g),f.className="cognigy-chat-user-message",d.className="cognigy-chat-user-message-container",f.appendChild(g),d.appendChild(f);var h=document.createElement("img");h.className="cognigy-chat-user-avatar",h.src="./images/user_avatar.jpg",d.appendChild(h),c.appendChild(d),c.scrollTop=c.scrollHeight}var formElement=document.getElementById("cognigy-form");formElement.addEventListener("submit",function(a){handleSendMessage(a);var b=document.getElementById("cognigy-input");b.value=""},!1);function handleDisplayRecording(a){var b=document.getElementById("cognigy-container"),c=document.createElement("div"),d=document.createElement("div"),f=document.createTextNode(a);d.className="cognigy-chat-user-message",c.className="cognigy-chat-user-message-container",d.appendChild(f),c.appendChild(d);var g=document.createElement("img");g.className="cognigy-chat-user-avatar",g.src="./images/user_avatar.jpg",c.appendChild(g),b.appendChild(c),b.scrollTop=b.scrollHeight}function handleDisplayPostbackMessage(a){var b=document.getElementById("cognigy-container"),c=document.createElement("div"),d=document.createElement("div"),f=document.createTextNode(a);d.className="cognigy-chat-user-message",c.className="cognigy-chat-user-message-container",d.appendChild(f),c.appendChild(d);var g=document.createElement("img");g.className="cognigy-chat-user-avatar",g.src="./images/user_avatar.jpg",c.appendChild(g),b.appendChild(c),b.scrollTop=b.scrollHeight}function displayCognigyMessage(a,b){if(!a)return null;var c=a&&a.text,d=document.getElementById("cognigy-container");if("undefined"!=typeof c){var f=document.createElement("div"),g=document.createElement("div"),h=document.createTextNode(c),i=createElement("img","cognigy-chat-bot-avatar"),j=new Image;j.onload=function(){i.src=b},j.onerror=function(){i.src="./images/cognigy_logo.svg"},j.src=b,f.append(i),g.className="cognigy-chat-bot-message",f.className="cognigy-chat-bot-message-container",g.appendChild(h),f.appendChild(g),d.appendChild(f)}if(a&&a.data&&(a.data.facebook||a.data._cognigy&&a.data._cognigy._facebook)){var k=new RichMessages(a.data,d);k.renderMessage()}d.scrollTop=d.scrollHeight}